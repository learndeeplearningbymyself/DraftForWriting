## Applications

### Amazon SQS

<img width="720" src="https://user-images.githubusercontent.com/15076665/93302394-e019da80-f834-11ea-8697-bfbb038aaf80.png">

Store messages in independent way

Example with meme website and travel website. In this 2 examples, even if we lose the EC2 instance, messages are still very OK

<img width="720" src="https://user-images.githubusercontent.com/15076665/93302844-8d8cee00-f835-11ea-9865-0e5221ea6bed.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93303079-e5c3f000-f835-11ea-9226-19d8f642d926.png">

Attention on "Decouple" key

<img width="720" src="https://user-images.githubusercontent.com/15076665/93303268-2b80b880-f836-11ea-8a2e-a4498d82cc4e.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93303398-59fe9380-f836-11ea-94f1-5dab75b980e6.png">

- There are two types of queue:
1. Standard queue (default)
2. FIFO

<img width="720" src="https://user-images.githubusercontent.com/15076665/93305323-4d2f6f00-f839-11ea-8c28-7680f852bb4c.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93305371-60423f00-f839-11ea-9efb-c55999c47eb7.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93305598-adbeac00-f839-11ea-8225-109f41786584.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93305634-bb743180-f839-11ea-8e06-c6311934b563.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93305867-160d8d80-f83a-11ea-8d83-8c41b9804b7c.png">

> Visibility timeout maximum is 12 hours

<img width="720" src="https://user-images.githubusercontent.com/15076665/93306204-85837d00-f83a-11ea-9837-fc7198614726.png">

### Simple Workflow Service

<img width="720" src="https://user-images.githubusercontent.com/15076665/93306387-bfed1a00-f83a-11ea-8f9b-87327998df73.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93306837-58839a00-f83b-11ea-8952-6ab0b9ff8fcd.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93307013-84068480-f83b-11ea-89d7-ee899a9eca12.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93307272-c3cd6c00-f83b-11ea-8da7-38a48ca5f4aa.png">

### SNS

<img width="720" src="https://user-images.githubusercontent.com/15076665/93310236-7c48df00-f83f-11ea-8eed-df0d163addd6.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93310339-9f738e80-f83f-11ea-87ce-82fde12fcf8d.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93310488-ce8a0000-f83f-11ea-8af8-7f8b071bcf86.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93310659-06914300-f840-11ea-839d-8fdada20a02d.png">

### Elastic Transcoder

<img width="720" src="https://user-images.githubusercontent.com/15076665/93313932-1874e500-f844-11ea-8af3-24763333f9d6.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93314075-4528fc80-f844-11ea-9556-e19f37748efe.png">

### API Gateway

<img width="720" src="https://user-images.githubusercontent.com/15076665/93314400-a81a9380-f844-11ea-8e7e-509a78650ffc.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93315123-9eddf680-f845-11ea-9dae-fcf897fcb15b.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93341091-a9f64e00-f868-11ea-8303-b60c05468545.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93341266-d742fc00-f868-11ea-8153-5aef90fc434d.png">

### Kinesis 101

<img width="720" src="https://user-images.githubusercontent.com/15076665/93414691-ccc24a00-f8dc-11ea-927f-58e2b185fb15.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93414825-114de580-f8dd-11ea-8f7c-b468f70469f2.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93415165-da2c0400-f8dd-11ea-9229-ebc4c608a2fe.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93415509-a2718c00-f8de-11ea-832d-52005a3636f4.png">

> There is Lambda function in Kinesis Firehose, when data come, lambda will be triggered, NO data persistent like Kinesis Streams

<img width="720" src="https://user-images.githubusercontent.com/15076665/93415699-114ee500-f8df-11ea-801a-87cbb5b4f46a.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93415739-2deb1d00-f8df-11ea-8347-3379595c806c.png">

> Kinesis analytics works with Firehose and Streams - analyze data inside Kinesis

<img width="720" src="https://user-images.githubusercontent.com/15076665/93415913-8c180000-f8df-11ea-944b-d2bdfa9c4e93.png">

### Web Identity Federation & Cognito

<img width="720" src="https://user-images.githubusercontent.com/15076665/93416319-8838ad80-f8e0-11ea-9bee-c6240dce68fc.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93416829-92a77700-f8e1-11ea-9598-37f54df95fa2.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93416972-cda9aa80-f8e1-11ea-9556-dfc4d947b03f.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93417057-11041900-f8e2-11ea-9905-e8e75495b6d7.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93417155-4c064c80-f8e2-11ea-9d29-283c9128cece.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93417344-d484ed00-f8e2-11ea-8541-477f695fc0b6.png">

In the following example:
1. Facebook, Google, ... send authentication code to **User Pool**
2. User send JWT to **Identity Pool** and **Identiy Pool** will grant her AWS credentials

<img width="720" src="https://user-images.githubusercontent.com/15076665/93417825-d3a08b00-f8e3-11ea-8cde-5e07b92df889.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93417881-f9c62b00-f8e3-11ea-8450-97db91fb9dbb.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93418026-650ffd00-f8e4-11ea-95b7-b32c6df6a456.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93418140-ab655c00-f8e4-11ea-8a5a-b1fab27ad39b.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93418285-01d29a80-f8e5-11ea-8799-fd04a05b6cf1.png">

## Security

### Reducing Security Threats

<img width="420" src="https://user-images.githubusercontent.com/15076665/93429273-db6c2980-f8fb-11ea-9a18-1770e98cb0d1.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93429426-18d0b700-f8fc-11ea-82f0-8152e54e3fac.png">

> SG: Security Group

With ALB (Application Load Balancer), traffic from bad actors will be terminated in ALB by itself. Host firewall would be ineffective in this case. One addition choice is allow only ALB SG to access EC2 SG

<img width="720" src="https://user-images.githubusercontent.com/15076665/93429821-b5935480-f8fc-11ea-9c34-4c1dd0afc9f3.png">

With NLB (Network load balancer) the traffic would not be terminated at NLB, instead it will be terminated at EC2.

The IP of the bad actors is visible from end-to-end. The solution in this case is block that IP address by NACL (Network ACL)

<img width="720" src="https://user-images.githubusercontent.com/15076665/93430152-2c305200-f8fd-11ea-80fc-27b709708754.png">

One more solution is use WAF (web Application Firewall - helps you monitor web requests and protect your web app from malicious requests) attached with ALB. It can help you prevent from SQL Injection and Cross-Site scripting attack

<img width="720" src="https://user-images.githubusercontent.com/15076665/93430876-47e82800-f8fe-11ea-9476-3db1f95c0175.png">

WAF is working on layer seven. We use NACL to block IP or range of IPs in layer four

We also can use CloudFront. Similar to ALB the "bad traffic" will be terminated in CloudFront. Only CloudFront's pass IPs can be visibled in NACL, so use blocking IP with NACL after CloudFront is ineffective.

<img width="720" src="https://user-images.githubusercontent.com/15076665/93431281-e1afd500-f8fe-11ea-8f49-1eaee48f1293.png">

### Key Management Service (KMS)

<img width="720" src="https://user-images.githubusercontent.com/15076665/93431973-db6e2880-f8ff-11ea-9c23-e7c746e15253.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93432201-24be7800-f900-11ea-92a0-9d4d2c4905aa.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93432452-867ee200-f900-11ea-996a-ccf47b7572f4.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93432741-e70e1f00-f900-11ea-8260-807525937b82.png">

Can use KMS with <= 4KB file. With the files those have size larger than 4KB, use Data Encrpytion Key (DEK)

### CloudHSM

HSM - Hardware security model

<img width="720" src="https://user-images.githubusercontent.com/15076665/93661084-f7083900-fa8f-11ea-8879-5fefe03d9ced.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93661116-39317a80-fa90-11ea-923f-9f144ab302b7.png">

### Parameter store

<img width="720" src="https://user-images.githubusercontent.com/15076665/93661204-ec9a6f00-fa90-11ea-8347-83aa8b874fee.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93661429-b0680e00-fa92-11ea-9e2b-6601f665227f.png">

### AWS Lambda

<img width="720" src="https://user-images.githubusercontent.com/15076665/93662084-29b62f80-fa98-11ea-9322-599e226e6361.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93662119-8285c800-fa98-11ea-8c0e-dc1e072f3013.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93662152-caa4ea80-fa98-11ea-9fee-5def00cfa8c6.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93662171-063fb480-fa99-11ea-88a4-c279fee39ef7.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93662204-57e83f00-fa99-11ea-97b6-3fb7baa0bda4.png">

> RDS is not serverless

<img width="720" src="https://user-images.githubusercontent.com/15076665/93662489-6df6ff00-fa9b-11ea-9010-f0fa262d813d.png">

<img width="720" src="https://user-images.githubusercontent.com/15076665/93662512-a4cd1500-fa9b-11ea-994e-af4965f0909d.png">

### Serverless Application Model (SAM)

<img width="720" src="https://user-images.githubusercontent.com/15076665/93691811-99263080-fb25-11ea-91f7-0bd7798b0a72.png">
